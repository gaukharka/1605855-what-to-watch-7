{"version":3,"sources":["consts.js","store/action.js","store/user/user.js","store/movie-data/movie-data.js","store/review/review.js","store/root-reducer.js","services/api.js","browser-history.js","store/middlewares/redirect.js","utils/utils.js","prop-types/movie-prop-types.js","components/player/video-preview.jsx","components/movie-card/movie-card.jsx","components/buttons/load-more-button.jsx","store/movie-data/selectors.js","selectors/get-filtered-movies.js","components/movie-list/movie-list.jsx","components/logo/logo.jsx","components/footer/footer.jsx","components/genre-list/genre-list.jsx","services/adaptors.js","store/api-actions.js","store/user/selectors.js","components/user-block/user-block.jsx","components/buttons/play-button.jsx","components/buttons/my-list-button.jsx","components/main-page/hidden-part.jsx","components/main-page/main-page.jsx","components/user-block/login.jsx","components/tabs/list.jsx","components/tabs/detail.jsx","components/tabs/details.jsx","store/review/selectors.js","prop-types/review-prop-types.js","components/tabs/review.jsx","components/tabs/reviews.jsx","components/tabs/tabs.jsx","components/similar-movies/similar-movies.jsx","components/movie-page/movie-page.jsx","components/my-list/my-list.jsx","components/not-found-screen/not-found-screen.jsx","components/review/rating.jsx","components/review/add-review-form.jsx","components/review/review.jsx","components/player/player-screen.jsx","components/loading-screen/loading-screen.jsx","components/private-route/private-route.jsx","components/app/app.jsx","components/app/action/init.js","index.js"],"names":["AppRoutes","INITIAL_GENRE","AuthorizationStatus","APIRoutes","ReviewLength","Rating","ActionType","changeGenre","createAction","genre","payload","reset","loadMovies","movies","loadPromoMovie","promoMovie","loadFavoriteMovies","favoriteMovies","loadReviews","reviews","requireAuthorization","status","user","authStatus","authInfo","logout","redirectToRoute","url","error","err","setStatus","isFetching","updateFilm","movie","updateFilms","setReviewIsSending","isSending","resetGenreToInitial","resetMaxMoviesShown","loadSimilarMovies","similarMovies","loadMovie","initialState","authorizationStatus","userData","createReducer","builder","addCase","state","action","maxMoviesShown","movieData","reviewData","NameSpace","combineReducers","HttpCode","token","localStorage","getItem","browserHistory","createBrowserHistory","redirect","_store","next","type","push","timeFormating","time","h","Math","floor","m","s","round","minutes","max","hours","PropTypes","shape","id","number","isRequired","name","string","posterImage","previewImage","backgroundImage","backgroundColor","videoLink","previewVideo","description","rating","scoresCount","director","starring","array","runTime","released","isFavorite","bool","VideoPreview","props","isActive","videoRef","useRef","useEffect","timeout","setTimeout","current","play","pause","clearTimeout","className","muted","height","src","poster","ref","MovieCard","onMouseOver","onMouseOut","alt","width","to","LoadMoreButton","onClickShowMoreMovies","onClick","getFetchedMovieStatus","getMovies","getGenres","getPromoMovie","getMovie","getFilteredMovies","filter","MovieList","useSelector","useState","activeMovie","setActiveMovie","visibleMovies","setVisibleMovies","filteredMovies","data-testid","slice","map","item","length","Logo","isFooter","dispatch","useDispatch","Footer","GenreList","genres","Set","idx","keyValue","adaptDataToMovie","data","poster_image","preview_image","background_image","background_color","video_link","preview_video_link","scores_count","run_time","is_favorite","adaptDataToMovies","fetchMovieList","_getState","api","get","then","catch","message","fetchPromoMovie","fetchFavoriteMovieList","fetchReviewList","setFetchStatus","getAuthorizationStatus","UserBlock","history","useHistory","evt","preventDefault","delete","removeItem","closeSession","PlayButton","viewBox","xlinkHref","MyListButton","allData","onMyListReroute","onMyListClick","post","updateMovie","HiddenPart","xmlns","xmlnsXlink","stroke","strokeWidth","fill","fillRule","points","clipRule","d","fillOpacity","MainPage","Login","loginRef","passwordRef","onSubmit","email","login","password","setItem","value","placeholder","htmlFor","List","score","currentMovie","Detail","title","Details","reduce","prev","curr","getReviews","comment","date","Review","review","dateTime","dateFormat","Reviews","a","Tabs","activeNav","setActiveNav","href","SimilarMovies","filteredByGenre","MoviePage","isAuth","fetchMovie","MyList","NotFoundScreen","onChange","Fragment","AddReviewForm","setReview","validate","handleChange","target","getHistory","goBack","postReview","disabled","Array","keys","reverse","ratingValue","PlayerScreen","isVideoPlaying","setIsVideoPlaying","currentVideoTime","setCurrentVideoTime","videoDuration","playerRef","onProgress","e","currentTime","style","left","paused","ended","elem","document","fullscreenElement","exitFullscreen","requestFullscreen","LoadingScreen","PrivateRoute","render","path","exact","routeProps","connect","init","isCheckedAuth","Number","match","params","onUnauthorized","axios","create","baseURL","headers","interceptors","response","use","request","config","createAPI","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","thunk","extraArgument","concat","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.929ff364.chunk.js","sourcesContent":["export const AppRoutes = {\n  ROOT: '/',\n  LOGIN: '/login',\n  MYLIST: '/mylist',\n  FILM: '/films/:id',\n  REVIEW: '/films/:id/review',\n  PLAYER: '/player/:id',\n};\n\nexport const INITIAL_GENRE = 'All genres';\n\nexport const MAX_MOVIES_SHOWN = 8;\n\nexport const MAX_SIMILAR_MOVIES_SHOWN = 4;\n\nexport const AuthorizationStatus = {\n  AUTH: 'AUTH',\n  NO_AUTH: 'NO_AUTH',\n  UNKNOWN: 'UNKNOWN',\n};\n\nexport const APIRoutes = {\n  MOVIES: '/films',\n  PROMO_MOVIE: '/promo',\n  FAVORITE_MOVIE: '/favorite',\n  GET_COMMENTS: '/comments',\n  LOGIN: '/login',\n  LOGOUT: '/logout',\n};\n\nexport const ReviewLength = {\n  MIN: 50,\n  MAX: 401,\n};\n\nconst Rating = {\n  BAD: 'Bad',\n  NORMAL: 'Normal',\n  GOOD: 'Good',\n  VERY_GOOD: 'Very good',\n  AWESOME: 'Awesome',\n};\n\nexport const getRating = (score) => {\n  if(score >= 0 & score < 3){\n    return Rating.BAD;\n  } else if(score >= 3 && score < 5){\n    return Rating.NORMAL;\n  } else if(score >= 5 && score < 8){\n    return Rating.GOOD;\n  } else if(score >= 8 && score < 10){\n    return Rating.VERY_GOOD;\n  }\n  return Rating.AWESOME;\n};\n\nexport const seconds = 60;\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const ActionType = {\n  CHANGE_GENRE: 'films/changeGenre',\n  RESET: 'films/reset',\n  RESET_GENRE: 'films/resetGenre',\n  RESET_MAX_MOVIES_SHOWN: 'films/resetMaxMoviesShown',\n  LOAD_MOVIES: 'data/loadMovies',\n  LOAD_REVIEWS: 'data/loadReviews',\n  LOAD_PROMO_MOVIE: 'data/loadPromoMovie',\n  LOAD_FAVORITE_MOVIES: 'data/loadFavoriteMovie',\n  LOAD_SIMILAR_MOVIES: 'data/loadSimilarMovies',\n  REQUIRE_AUTHORIZATION: 'user/requireAuthorization',\n  LOGOUT: 'user/logout',\n  REDIRECT_TO_ROUTE: 'films/redirectToRoute',\n  ERROR: 'data/error',\n  FETCHING_STATUS: 'data/fetchingStatus',\n  LOAD_MOVIE: 'data/loadMovie',\n  UPDATE_MOVIE: 'data/updateMovie',\n  POST_REVIEWS: 'data/postReview',\n};\n\nexport const changeGenre = createAction(ActionType.CHANGE_GENRE, (genre) => ({\n  payload: genre,\n}));\n\nexport const reset = createAction(ActionType.RESET);\n\nexport const loadMovies = createAction(ActionType.LOAD_MOVIES, (movies) => ({\n  payload: movies,\n}));\n\nexport const loadPromoMovie = createAction(ActionType.LOAD_PROMO_MOVIE, (promoMovie) => ({\n  payload: promoMovie,\n}));\n\nexport const loadFavoriteMovies = createAction(ActionType.LOAD_FAVORITE_MOVIES, (favoriteMovies) => ({\n  payload: favoriteMovies,\n}));\n\nexport const loadReviews = createAction(ActionType.LOAD_REVIEWS, (reviews) => ({\n  payload: reviews,\n}));\n\nexport const requireAuthorization = createAction(ActionType.REQUIRE_AUTHORIZATION, (status, user) => ({\n  payload: {\n    authStatus: status,\n    authInfo: user,\n  },\n}));\n\nexport const logout = createAction(ActionType.LOGOUT);\n\nexport const redirectToRoute = createAction(ActionType.REDIRECT_TO_ROUTE, (url) => ({\n  payload: url,\n}));\n\nexport const error = createAction(ActionType.ERROR, (err) => ({\n  payload: err,\n}));\n\nexport const setStatus = createAction(ActionType.FETCHING_STATUS, (isFetching) => ({\n  payload: isFetching,\n}));\n\nexport const updateFilm = createAction(ActionType.UPDATE_MOVIE, (movie) => ({\n  payload: movie,\n}));\n\nexport const updateFilms = createAction(ActionType.UPDATE_MOVIE, (movies) => ({\n  payload: movies,\n}));\n\nexport const setReviewIsSending = createAction(ActionType.POST_REVIEWS, (isSending) => ({\n  payload: isSending,\n}));\n\nexport const resetGenreToInitial = createAction(ActionType.RESET_GENRE);\n\nexport const resetMaxMoviesShown = createAction(ActionType.RESET_MAX_MOVIES_SHOWN);\n\nexport const loadSimilarMovies = createAction(ActionType.LOAD_SIMILAR_MOVIES, (similarMovies) => ({\n  payload: similarMovies,\n}));\n\nexport const loadMovie = createAction(ActionType.LOAD_MOVIE, (movie) => ({\n  payload: movie,\n}));\n","import { createReducer } from '@reduxjs/toolkit';\nimport { AuthorizationStatus } from '../../consts';\nimport { requireAuthorization, logout } from '../action';\n\nconst initialState = {\n  authorizationStatus: AuthorizationStatus.UNKNOWN,\n  authInfo: {},\n};\n\nexport const userData = createReducer(initialState, (builder) => {\n  builder\n    .addCase(requireAuthorization, (state, action) => {\n      state.authorizationStatus = action.payload.authStatus;\n      state.authInfo = action.payload.authInfo;\n    })\n    .addCase(logout, (state) => {\n      state.authorizationStatus = AuthorizationStatus.NO_AUTH;\n      state.authInfo = {};\n    });\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { INITIAL_GENRE, MAX_MOVIES_SHOWN } from '../../consts';\nimport { changeGenre, reset, loadMovies, loadPromoMovie, loadFavoriteMovies, setStatus, updateFilm, resetGenreToInitial, resetMaxMoviesShown, loadSimilarMovies, loadMovie } from '../action';\n\nconst initialState = {\n  genre: INITIAL_GENRE,\n  movies: [],\n  promoMovie: {},\n  movie: {},\n  favoriteMovies: [],\n  isFetching: false,\n  error: '',\n  maxMoviesShown: MAX_MOVIES_SHOWN,\n  similarMovies: [],\n};\n\nexport const movieData = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadMovies, (state, action) => {\n      state.movies = action.payload;\n    })\n    .addCase(loadMovie, (state, action) => {\n      state.movie = action.payload;\n    })\n    .addCase(loadPromoMovie, (state, action) => {\n      state.promoMovie = action.payload;\n    })\n    .addCase(loadFavoriteMovies, (state, action) => {\n      state.favoriteMovies = action.payload;\n    })\n    .addCase(changeGenre, (state, action) => {\n      state.genre = action.payload;\n    })\n    .addCase(reset)\n    .addCase(setStatus, (state, action) => {\n      state.isFetching = action.payload;\n    })\n    .addCase(updateFilm, (state, action) => {\n      state.movie = action.payload;\n      state.promoMovie = action.payload;\n    })\n    .addCase(resetGenreToInitial, (state) => {\n      state.genre = INITIAL_GENRE;\n    })\n    .addCase(resetMaxMoviesShown, (state) => {\n      state.maxMoviesShown = MAX_MOVIES_SHOWN;\n    })\n    .addCase(loadSimilarMovies, (state, action) => {\n      state.similarMovies = action.payload;\n    });\n});\n","import { createReducer } from '@reduxjs/toolkit';\nimport { loadReviews } from '../action';\n\nconst initialState = {\n  reviews: [],\n};\n\nexport const reviewData = createReducer(initialState, (builder) => {\n  builder\n    .addCase(loadReviews, (state, action) => {\n      state.reviews = action.payload;\n    });\n});\n","import { combineReducers } from 'redux';\nimport { userData } from './user/user';\nimport { movieData } from './movie-data/movie-data';\nimport { reviewData } from './review/review';\n\nexport const NameSpace = {\n  USER: 'USER',\n  MOVIE: 'MOVIE',\n  REVIEW: 'REVIEW',\n};\n\nexport default combineReducers({\n  [NameSpace.MOVIE]: movieData,\n  [NameSpace.USER]: userData,\n  [NameSpace.REVIEW]: reviewData,\n});\n","import axios from 'axios';\n\nconst BACKEND_URL = 'https://7.react.pages.academy/wtw';\nconst REQUEST_TIMEOUT = 5000;\n\nconst HttpCode = {\n  UNAUTHORIZED: 401,\n};\n\nconst token = localStorage.getItem('token') ?? '';\n\nexport const createAPI = (onUnauthorized) => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n    headers: {\n      'x-token': token,\n    },\n  });\n\n  const onSuccess = (response) => response;\n\n  const onFail = (err) => {\n    const {response} = err;\n\n    if(response.status === HttpCode.UNAUTHORIZED) {\n      onUnauthorized();\n    }\n\n    throw err;\n  };\n\n  api.interceptors.response.use(onSuccess, onFail);\n\n  api.interceptors.request.use((config) => {\n    config.headers['x-token'] = localStorage.getItem('token') ?? '';\n    return config;\n  });\n\n  return api;\n};\n","import { createBrowserHistory } from 'history';\n\nexport const browserHistory = createBrowserHistory();\n","import { browserHistory } from '../../browser-history';\nimport { ActionType } from '../action';\n\nexport const redirect = (_store) => (next) => (action) => {\n  if (action.type === ActionType.REDIRECT_TO_ROUTE) {\n    browserHistory.push(action.payload);\n  }\n\n  return next(action);\n};\n","import { AuthorizationStatus } from '../consts';\n\nexport const isCheckedAuth = (authorizationStatus) => authorizationStatus === AuthorizationStatus.UNKNOWN;\n\nexport const timeFormating = (time) => {\n  const h = Math.floor(time / 3600);\n  const m = Math.floor((time % 3600) / 60);\n  const s = Math.round(time % 60);\n\n  const minutes = `${m > 9 ? Math.max(m, 0) : `0${Math.max(0, m)}`}:${s > 9 ? Math.max(0, s) : `0${Math.max(0, s)}`}`;\n  const hours = `${h > 9 ? Math.max(h, 0) : `0${Math.max(0, h)}`}:${minutes}`;\n\n  if(h < 1) {\n    return minutes;\n  }\n\n  return hours;\n};\n","import PropTypes from 'prop-types';\n\nexport const moviePropTypes = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  posterImage: PropTypes.string.isRequired,\n  previewImage: PropTypes.string.isRequired,\n  backgroundImage: PropTypes.string.isRequired,\n  backgroundColor: PropTypes.string.isRequired,\n  videoLink: PropTypes.string.isRequired,\n  previewVideo: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  rating: PropTypes.number.isRequired,\n  scoresCount: PropTypes.number.isRequired,\n  director: PropTypes.string.isRequired,\n  starring: PropTypes.array.isRequired,\n  runTime: PropTypes.number.isRequired,\n  genre: PropTypes.string.isRequired,\n  released: PropTypes.number.isRequired,\n  isFavorite: PropTypes.bool.isRequired,\n});\n","import React, { useRef, useEffect }  from'react';\nimport PropTypes from 'prop-types';\n\nfunction VideoPreview(props) {\n  const {previewImage, previewVideo, isActive} = props;\n\n  const videoRef = useRef(null);\n\n  useEffect(() => {\n    let timeout;\n\n    if(isActive) {\n      timeout = setTimeout(() => videoRef.current.play(), 1000);\n    } else {\n      videoRef.current.pause();\n    }\n\n    return () => clearTimeout(timeout);\n  }, [isActive]);\n\n  return (\n    <div className=\"small-film-card__image\">\n      <video\n        muted\n        height=\"175\"\n        type=\"video/mp4\"\n        src={previewVideo}\n        poster={previewImage}\n        ref={videoRef}\n      />\n    </div>\n  );\n}\n\nVideoPreview.propTypes = {\n  previewImage: PropTypes.string.isRequired,\n  previewVideo: PropTypes.string.isRequired,\n  isActive: PropTypes.bool.isRequired,\n};\n\nexport default VideoPreview;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport VideoPreview from '../player/video-preview.jsx';\nimport { moviePropTypes } from '../../prop-types/movie-prop-types';\n\nfunction MovieCard(props) {\n  const {movie, onMouseOver, onMouseOut, isActive } = props;\n  const {id, name, previewImage, previewVideo } = movie;\n\n  return(\n    <article\n      className=\"small-film-card catalog__films-card\"\n      onMouseOver={onMouseOver}\n      onMouseOut={onMouseOut}\n    >\n      {isActive ?\n        <VideoPreview\n          previewImage={previewImage}\n          previewVideo={previewVideo}\n          isActive={isActive}\n        /> :\n        <img\n          src={previewImage}\n          alt={name}\n          width=\"280\"\n          height=\"175\"\n        />}\n      <h3 className=\"small-film-card__title\">\n        <Link\n          to={`/films/${id}`}\n          className=\"small-film-card__link\"\n        >{name}\n        </Link>\n      </h3>\n    </article>);\n}\n\nMovieCard.propTypes = {\n  isActive: PropTypes.bool.isRequired,\n  movie: moviePropTypes,\n  onMouseOver: PropTypes.func.isRequired,\n  onMouseOut: PropTypes.func.isRequired,\n};\n\nexport default MovieCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction LoadMoreButton(props) {\n  const {onClickShowMoreMovies} = props;\n\n  return (\n    <div className=\"catalog__more\">\n      <button\n        className=\"catalog__button\"\n        type=\"button\"\n        onClick={() => onClickShowMoreMovies()}\n      >Show more\n      </button>\n    </div>\n  );\n}\n\nLoadMoreButton.propTypes = {\n  onClickShowMoreMovies: PropTypes.func.isRequired,\n};\n\nexport default LoadMoreButton;\n","import { NameSpace } from '../root-reducer';\n\nexport const getFetchedMovieStatus = (state) => state[NameSpace.MOVIE].isFetching;\n\nexport const getMovies = (state) => state[NameSpace.MOVIE].movies;\n\nexport const getGenres = (state) => state[NameSpace.MOVIE].genre;\n\nexport const getPromoMovie = (state) => state[NameSpace.MOVIE].promoMovie;\n\nexport const getMovie = (state) => state[NameSpace.MOVIE].movie;\n","\nimport {INITIAL_GENRE} from '../consts';\n\nexport const getFilteredMovies = (movies = [], genre) => (\n  genre === INITIAL_GENRE ? movies : movies.filter((movie) => movie.genre === genre)\n);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { MAX_MOVIES_SHOWN } from '../../consts.js';\nimport { moviePropTypes } from '../../prop-types/movie-prop-types';\nimport MovieCard from '../movie-card/movie-card.jsx';\nimport LoadMoreButton from '../buttons/load-more-button';\nimport { getGenres } from '../../store/movie-data/selectors';\nimport { getFilteredMovies } from '../../selectors/get-filtered-movies';\n\nfunction MovieList(props) {\n  const {movies} = props;\n  const genre = useSelector(getGenres);\n  const [activeMovie, setActiveMovie] = useState();\n  const [visibleMovies, setVisibleMovies] = useState(MAX_MOVIES_SHOWN);\n  const filteredMovies = getFilteredMovies(movies, genre);\n\n  const loadMore = () => {\n    setVisibleMovies(visibleMovies + MAX_MOVIES_SHOWN);\n  };\n\n  return (\n    <>\n      <div className=\"catalog__films-list\" data-testid=\"catalog-films-list\">\n        {filteredMovies.slice(0, visibleMovies).map((item) => (\n          <MovieCard\n            key={item.id+1}\n            movie={item}\n            isActive={item === activeMovie}\n            onMouseOver={() => setActiveMovie(item)}\n            onMouseOut={() => setActiveMovie(null)}\n          />\n        ))}\n      </div>\n      { visibleMovies < filteredMovies.length &&\n        <LoadMoreButton\n          onClickShowMoreMovies={loadMore}\n        />}\n    </>\n  );\n}\n\nMovieList.propTypes = {\n  movies: PropTypes.arrayOf(moviePropTypes).isRequired,\n};\n\nexport default MovieList;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport { resetGenreToInitial } from '../../store/action';\nimport { AppRoutes } from '../../consts';\n\nfunction Logo(props) {\n  const {isFooter} = props;\n\n  const dispatch = useDispatch();\n\n  return (\n    <div className=\"logo\" data-testid=\"app-logo\">\n      <Link\n        to={AppRoutes.ROOT}\n        className={`logo__link ${isFooter ? 'logo__link--light' : ''}`}\n        onClick={() => dispatch(resetGenreToInitial())}\n      >\n        <span className=\"logo__letter logo__letter--1\">W</span>\n        <span className=\"logo__letter logo__letter--2\">T</span>\n        <span className=\"logo__letter logo__letter--3\">W</span>\n      </Link>\n    </div>\n  );\n}\n\nLogo.propTypes = {\n  isFooter: PropTypes.bool,\n};\n\nexport default Logo;\n","import React from 'react';\nimport Logo from '../logo/logo';\n\nfunction Footer() {\n\n  return (\n    <footer className=\"page-footer\" data-testid=\"footer\">\n      <Logo isFooter/>\n      <div className=\"copyright\">\n        <p>© 2019 What to watch Ltd.</p>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { INITIAL_GENRE } from '../../consts';\nimport { changeGenre } from '../../store/action';\nimport { getMovies, getGenres } from '../../store/movie-data/selectors';\n\nfunction GenreList() {\n  const movies = useSelector(getMovies);\n  const genre = useSelector(getGenres);\n\n  const genres = [...new Set([INITIAL_GENRE, ...movies.map((movie) => movie.genre)])];\n\n  const dispatch = useDispatch();\n\n  return (\n    <ul className=\"catalog__genres-list\">\n      {genres.map((item, idx) => {\n        const keyValue = idx +1;\n\n        return (\n          <li\n            key={keyValue}\n            className={`catalog__genres-item ${item === genre ? 'catalog__genres-item--active' : ''}`}\n            onClick={() => dispatch(changeGenre(item))}\n          >\n            <Link\n              to=\"/#\"\n              className=\"catalog__genres-link\"\n            >{item}\n            </Link>\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default GenreList;\n","export const adaptDataToMovie = (data) => ({\n  id: data.id,\n  name: data.name,\n  posterImage: data.poster_image,\n  previewImage: data.preview_image,\n  backgroundImage: data.background_image,\n  backgroundColor: data.background_color,\n  videoLink: data.video_link,\n  previewVideo: data.preview_video_link,\n  description: data.description,\n  rating: data.rating,\n  scoresCount: data.scores_count,\n  director: data.director,\n  starring: data.starring,\n  runTime: data.run_time,\n  genre: data.genre,\n  released: data.released,\n  isFavorite: data.is_favorite,\n});\n\nexport const adaptDataToMovies = (data) => (data.map((movie) => adaptDataToMovie(movie)));\n","import { loadMovies,\n  loadPromoMovie,\n  loadFavoriteMovies,\n  loadReviews,\n  requireAuthorization,\n  redirectToRoute,\n  logout as closeSession,\n  error,\n  setStatus,\n  updateFilm,\n  setReviewIsSending,\n  loadSimilarMovies,\n  updateFilms,\n  loadMovie } from './action';\n\nimport { AuthorizationStatus, APIRoutes, AppRoutes } from '../consts';\nimport { adaptDataToMovie, adaptDataToMovies } from '../services/adaptors';\n\nexport const fetchMovieList = () => (dispatch, _getState, api) => (\n  api.get(APIRoutes.MOVIES)\n    .then(({data})=> dispatch(loadMovies(adaptDataToMovies(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const fetchMovie = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoutes.MOVIES}/${id}`)\n    .then(({data}) => dispatch(loadMovie(adaptDataToMovie(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const fetchPromoMovie = () => (dispatch, _getState, api) => (\n  api.get(APIRoutes.PROMO_MOVIE)\n    .then(({data})=> dispatch(loadPromoMovie(adaptDataToMovie(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const fetchFavoriteMovieList = () => (dispatch, _getState, api) => (\n  api.get(APIRoutes.FAVORITE_MOVIE)\n    .then(({data})=> dispatch(loadFavoriteMovies(adaptDataToMovies(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const fetchReviewList = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoutes.GET_COMMENTS}/${id}`)\n    .then(({data})=> dispatch(loadReviews(data)))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const checkAuth = () => (dispatch, _getState, api) => (\n  api.get(APIRoutes.LOGIN)\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const login = ({login: email, password}) => (dispatch, _getState, api) => (\n  api.post(APIRoutes.LOGIN, {email, password})\n    .then(({data}) => localStorage.setItem('token', data.token))\n    .then(() => dispatch(requireAuthorization(AuthorizationStatus.AUTH)))\n    .then(() => dispatch(redirectToRoute(AppRoutes.ROOT)))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const logout = () => (dispatch, _getState, api) => (\n  api.delete(APIRoutes.LOGOUT)\n    .then(() => localStorage.removeItem('token'))\n    .then(() => dispatch(closeSession()))\n);\n\nexport const postReview = (id, review, getHistory) => (dispatch, _getState, api) => (\n  api.post(`${APIRoutes.GET_COMMENTS}/${id}`, {...review})\n    .then(() => dispatch(setReviewIsSending(false)))\n    .then(() => getHistory())\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const updateMovie = (id, status) => (dispatch, _getState, api) => (\n  api.post(`${APIRoutes.FAVORITE_MOVIE}/${id}/${status}`)\n    .then(({data}) => dispatch(updateFilm(adaptDataToMovie(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const setFetchStatus = (status) => (\n  setStatus(status)\n);\n\nexport const fetchSimilarMovies = (id) => (dispatch, _getState, api) => (\n  api.get(`${APIRoutes.MOVIES}/${id}/similar`)\n    .then((data) => dispatch(loadSimilarMovies(adaptDataToMovie(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n\nexport const updateMovies = (id, status) => (dispatch, _getState, api) => (\n  api.post(`${APIRoutes.FAVORITE_MOVIE}/${id}/${status}`)\n    .then(({data}) => dispatch(updateFilms(adaptDataToMovie(data))))\n    .catch((err) => dispatch(error(err.message)))\n);\n","import { NameSpace } from '../root-reducer';\n\nexport const getAuthorizationStatus = (state) => state[NameSpace.USER].authorizationStatus;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { AppRoutes, AuthorizationStatus } from '../../consts';\nimport { logout } from '../../store/api-actions';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\n\nfunction UserBlock() {\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  return (\n    <ul className=\"user-block\" data-testid=\"app-user-block\">\n      {authorizationStatus === AuthorizationStatus.AUTH ?\n        <>\n          <li className=\"user-block__item\">\n            <div\n              className=\"user-block__avatar\"\n              onClick={() => history.push(`${AppRoutes.MYLIST}`)}\n            >\n              <img src=\"img/avatar.jpg\" alt=\"User avatar\" width=\"63\" height=\"63\" />\n            </div>\n          </li>\n          <li className=\"user-block__item\">\n            <Link\n              to={AppRoutes.ROOT}\n              className=\"user-block__link\"\n              onClick={(evt) => {\n                evt.preventDefault();\n                dispatch(logout());\n              }}\n            >Sign out\n            </Link>\n          </li>\n        </> :\n        <Link\n          to={AppRoutes.LOGIN}\n          className=\"user-block__link\"\n        >Sign in\n        </Link>}\n    </ul>);\n}\n\nexport default UserBlock;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PlayButton(props) {\n  const {onClick} = props;\n\n  return (\n    <button\n      className=\"btn btn--play film-card__button\"\n      type=\"button\"\n      onClick={onClick}\n      data-testid=\"button-play\"\n    >\n      <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n        <use xlinkHref=\"#play-s\"></use>\n      </svg>\n      <span>Play</span>\n    </button>\n  );\n}\n\nPlayButton.propTypes={\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default PlayButton;\n","import React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport { updateMovie, updateMovies, fetchPromoMovie, fetchMovieList, fetchFavoriteMovieList } from '../../store/api-actions';\nimport { useHistory } from 'react-router';\nimport { AppRoutes, AuthorizationStatus } from '../../consts';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\nimport { moviePropTypes } from '../../prop-types/movie-prop-types';\n\nfunction MyListButton(props) {\n  const {movie} = props;\n  const dispatch = useDispatch();\n\n  const allData = () => {\n    dispatch(fetchPromoMovie());\n    dispatch(fetchMovieList());\n    dispatch(fetchFavoriteMovieList());\n  };\n\n  const history = useHistory();\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n\n  const onMyListReroute = () => history.push(`${AppRoutes.LOGIN}`);\n\n  const onMyListClick = () => {\n    if(movie.id !== 1){\n      dispatch(updateMovies(movie.id, movie.isFavorite ? 0 : 1));\n      allData();\n    }\n    dispatch(updateMovie(movie.id, movie.isFavorite ? 0 : 1));\n    allData();\n  };\n\n  const onButtonClick = () => authorizationStatus === AuthorizationStatus.AUTH ? onMyListClick : onMyListReroute;\n\n  return (\n    <button\n      className=\"btn btn--list film-card__button\"\n      type=\"button\"\n      onClick={onButtonClick()}\n      data-testid=\"button-mylist\"\n    >\n      {movie.isFavorite ?\n        <svg viewBox=\"0 0 18 14\" width=\"18\" height=\"14\">\n          <use xlinkHref=\"#in-list\"></use>\n        </svg> :\n        <svg viewBox=\"0 0 19 20\" width=\"19\" height=\"20\">\n          <use xlinkHref=\"#add\"></use>\n        </svg>}\n      <span>My list</span>\n    </button>\n  );\n}\n\nMyListButton.propTypes = {\n  movie: moviePropTypes,\n};\n\nexport default MyListButton;\n","import React from 'react';\n\nfunction HiddenPart() {\n\n  return (\n    <div className=\"visually-hidden\">\n      {/* <!-- inject:svg --> */}\n      <svg xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n        <symbol id=\"add\" viewBox=\"0 0 19 20\">\n          {/* <!-- Generator: Sketch 52.2 (67145) - http://www.bohemiancoding.com/sketch --> */}\n          <title>+</title>\n          <desc>Created with Sketch.</desc>\n          <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <polygon id=\"+\" fill=\"#EEE5B5\" points=\"10.777832 11.2880859 10.777832 19.5527344 8.41650391 19.5527344 8.41650391 11.2880859 0.627929688 11.2880859 0.627929688 8.92675781 8.41650391 8.92675781 8.41650391 0.662109375 10.777832 0.662109375 10.777832 8.92675781 18.5664062 8.92675781 18.5664062 11.2880859\"/>\n          </g>\n        </symbol>\n        <symbol id=\"full-screen\" viewBox=\"0 0 27 27\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M23.8571 0H16V3.14286H23.8571V11H27V3.14286V0H23.8571Z\" fill=\"#FFF9D9\" fillOpacity=\"0.7\"/>\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M27 23.8571V16H23.8571V23.8571H16V27H23.8571H27L27 23.8571Z\" fill=\"#FFF9D9\" fillOpacity=\"0.7\"/>\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 3.14286L0 11H3.14286L3.14286 3.14286L11 3.14286V0H3.14286H0L0 3.14286Z\" fill=\"#FFF9D9\" fillOpacity=\"0.7\"/>\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M3.14286 27H11V23.8571H3.14286L3.14286 16H0L0 23.8571V27H3.14286Z\" fill=\"#FFF9D9\" fillOpacity=\"0.7\"/>\n        </symbol>\n        <symbol id=\"in-list\" viewBox=\"0 0 18 14\">\n          <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M2.40513 5.35353L6.1818 8.90902L15.5807 0L18 2.80485L6.18935 14L0 8.17346L2.40513 5.35353Z\" fill=\"#EEE5B5\"/>\n        </symbol>\n        <symbol id=\"pause\" viewBox=\"0 0 14 21\">\n          <symbol id=\"play-s\" viewBox=\"0 0 19 19\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M0 0L19 9.5L0 19V0Z\" fill=\"#EEE5B5\" />\n          </symbol>\n          {/* <!-- Generator: Sketch 52.2 (67145) - http://www.bohemiancoding.com/sketch --> */}\n          <title>Artboard</title>\n          <desc>Created with Sketch.</desc>\n          <g id=\"Artboard\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n            <polygon id=\"Line\" fill=\"#EEE5B5\" fillRule=\"nonzero\" points=\"0 -1.11910481e-13 4 -1.11910481e-13 4 21 0 21\"/>\n            <polygon id=\"Line\" fill=\"#EEE5B5\" fillRule=\"nonzero\" points=\"10 -1.11910481e-13 14 -1.11910481e-13 14 21 10 21\"/>\n          </g>\n        </symbol>\n      </svg>\n      {/* <!-- endinject --> */}\n    </div>\n  );\n}\n\nexport default HiddenPart;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport MovieList from '../movie-list/movie-list';\nimport { useHistory } from 'react-router';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport Genres from '../genre-list/genre-list';\nimport UserBlock from '../user-block/user-block';\nimport PlayButton from '../buttons/play-button';\nimport MyListButton from '../buttons/my-list-button';\nimport HiddenPart from './hidden-part';\nimport { getMovies, getPromoMovie } from '../../store/movie-data/selectors';\n\nfunction MainPage() {\n  const promoMovie = useSelector(getPromoMovie);\n  const movies = useSelector(getMovies);\n  const {id, name, genre, released, posterImage, backgroundImage} = promoMovie;\n\n  const history = useHistory();\n\n  const handlePlayButtonClick = () => history.push(`/player/${id}`);\n\n  return (\n    <>\n      <HiddenPart />\n      <section className=\"film-card\">\n        <div className=\"film-card__bg\">\n          <img src={backgroundImage} alt={name} />\n        </div>\n\n        <h1 className=\"visually-hidden\">WTW</h1>\n\n        <header className=\"page-header film-card__head\">\n          <Logo />\n          <UserBlock/>\n        </header>\n\n        <div className=\"film-card__wrap\">\n          <div className=\"film-card__info\">\n            <div className=\"film-card__poster\">\n              <img src={posterImage} alt={name} width=\"218\" height=\"327\" />\n            </div>\n\n            <div className=\"film-card__desc\">\n              <h2 className=\"film-card__title\">{name}</h2>\n              <p className=\"film-card__meta\">\n                <span className=\"film-card__genre\">{genre}</span>\n                <span className=\"film-card__year\">{released}</span>\n              </p>\n\n              <div className=\"film-card__buttons\">\n                <PlayButton\n                  onClick={handlePlayButtonClick}\n                />\n                <MyListButton movie={promoMovie} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"page-content\">\n        <section className=\"catalog\">\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n          <Genres />\n          <MovieList movies={movies}/>\n        </section>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default MainPage;\n","import React, { useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport { login } from '../../store/api-actions';\n\nfunction Login() {\n  const dispatch = useDispatch();\n  const loginRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    dispatch(login({\n      login: loginRef.current.value,\n      password: passwordRef.current.value,\n    }));\n  };\n\n  return (\n    <div className=\"user-page\">\n      <header className=\"page-header user-page__head\">\n        <Logo />\n        <h1 className=\"page-title user-page__title\">Sign in</h1>\n      </header>\n      <div className=\"sign-in user-page__content\">\n        <form\n          action=\"#\"\n          className=\"sign-in__form\"\n          onSubmit={handleSubmit}\n        >\n          <div className=\"sign-in__fields\">\n            <div className=\"sign-in__field\">\n              <input\n                ref={loginRef}\n                className=\"sign-in__input\"\n                type=\"email\"\n                placeholder=\"Email address\"\n                name=\"user-email\"\n                id=\"user-email\"\n                data-testid=\"email\"\n              />\n              <label\n                className=\"sign-in__label visually-hidden\"\n                htmlFor=\"user-email\"\n              >\n                Email address\n              </label>\n            </div>\n            <div className=\"sign-in__field\">\n              <input\n                ref={passwordRef}\n                className=\"sign-in__input\"\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"user-password\"\n                id=\"user-password\"\n                data-testid=\"password\"\n              />\n              <label\n                className=\"sign-in__label visually-hidden\"\n                htmlFor=\"user-password\"\n              >\n                Password\n              </label>\n            </div>\n          </div>\n          <div className=\"sign-in__submit\">\n            <button\n              className=\"sign-in__btn\"\n              type=\"submit\"\n            >\n              Sign in\n            </button>\n          </div>\n        </form>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default Login;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getMovie } from '../../store/movie-data/selectors';\nimport { getRating } from '../../consts';\n\nfunction List() {\n  const currentMovie = useSelector(getMovie);\n\n  const {rating, scoresCount, description, director, starring} = currentMovie;\n\n  return (\n    <>\n      <div className=\"film-rating\">\n        <div className=\"film-rating__score\">\n          {rating}\n        </div>\n        <p className=\"film-rating__meta\">\n          <span className=\"film-rating__level\">{getRating(rating)}</span>\n          <span className=\"film-rating__count\">\n            {scoresCount} ratings\n          </span>\n        </p>\n      </div>\n      <div className=\"film-card__text\">\n        <p>Description</p>\n        <p>{description}</p>\n        <p className=\"film-card__director\">\n          <strong>Director: {director}</strong>\n        </p>\n        <p className=\"film-card__starring\">\n          <strong>Starring: {starring}</strong>\n        </p>\n      </div>\n    </>\n  );\n}\n\nexport default List;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Detail(props) {\n  const {data, title} = props;\n\n  return (\n    <p className=\"film-card__details-item\">\n      <strong className=\"film-card__details-name\">{title}</strong>\n      <span className=\"film-card__details-value\">{data}</span>\n    </p>\n  );\n}\n\nDetail.propTypes = {\n  data: PropTypes.any.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nexport default Detail;\n","import React from 'react';\nimport Detail from './detail';\nimport { moviePropTypes } from '../../prop-types/movie-prop-types';\n\nfunction Details(props) {\n  const {movie} = props;\n\n  const title = {\n    director: 'Director',\n    starring: 'Starring',\n    runtime: 'Run Time',\n    genre: 'Genre',\n    released: 'Released',\n  };\n\n  const movieStars = () => {\n    if(movie.starring.length > 1) {\n      return movie.starring.reduce((prev, curr) => [prev, ', ', curr]);\n    }\n    return movie.starring;\n  };\n\n  return (\n    <div className=\"film-card__text film-card__row\">\n      <div className=\"film-card__text-col\">\n        <Detail data={movie.director} title={title.director}/>\n        <Detail data={movieStars()} title={title.starring}/>\n      </div>\n      <div className=\"film-card__text-col\">\n        <Detail data={movie.runTime} title={title.runtime}/>\n        <Detail data={movie.genre} title={title.genre}/>\n        <Detail data={movie.released} title={title.released}/>\n      </div>\n    </div>\n  );\n}\n\nDetails.propTypes = {\n  movie: moviePropTypes,\n};\n\nexport default Details;\n","\nimport { NameSpace } from '../root-reducer';\n\nexport const getReviews = (state) => state[NameSpace.REVIEW].reviews;\n","import PropTypes from 'prop-types';\n\nexport const reviewPropTypes = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  user: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n  }).isRequired,\n  rating: PropTypes.number.isRequired,\n  comment: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n});\n","import React from 'react';\nimport dateFormat from 'dateformat';\nimport {reviewPropTypes} from '../../prop-types/review-prop-types';\n\nfunction Review(props) {\n  const {review}=props;\n\n  return (\n    <div\n      className=\"review\"\n    >\n      <blockquote className=\"review__quote\">\n        <p className=\"review__text\">\n          {review.comment}\n        </p>\n        <footer className=\"review__details\">\n          <cite className=\"review__author\">\n            {review.user.name}\n          </cite>\n          <time\n            className=\"review__date\"\n            dateTime=\"2016-12-24\"\n          >\n            {dateFormat(review.date, 'yyyy-mm-dd')}\n          </time>\n        </footer>\n      </blockquote>\n      <div className=\"review__rating\">\n        {review.rating}\n      </div>\n    </div>\n  );\n}\n\nReview.propTypes={\n  review: reviewPropTypes,\n};\n\nexport default Review;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { fetchReviewList } from '../../store/api-actions';\nimport { getReviews } from '../../store/review/selectors.js';\nimport Review from './review';\n\nfunction Reviews({id}) {\n\n  const reviews = useSelector(getReviews);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    (async () => dispatch(fetchReviewList(id)))();\n  }, []);\n\n  return (\n    <div className=\"film-card__reviews film-card__row\">\n      <div className=\"film-card__reviews-col\">\n        {reviews.map((review) => (\n          <Review\n            key={review.id+1}\n            review={review}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nReviews.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default Reviews;\n","import React, {  useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getMovie } from '../../store/movie-data/selectors';\nimport List from './list.jsx';\nimport Details from './details.jsx';\nimport Reviews from './reviews.jsx';\n\nfunction Tabs(){\n  const currentMovie = useSelector(getMovie);\n\n  const [activeNav, setActiveNav] = useState(1);\n\n  return (\n    <div className=\"film-card__desc\" data-testid=\"tabs\">\n      <nav className=\"film-nav film-card__nav\">\n        <ul className=\"film-nav__list\">\n          <li className={activeNav === 1 ? 'film-nav__item film-nav__item--active' : 'film-nav__item'}>\n            <a\n              href=\"/#\"\n              className=\"film-nav__link\"\n              onClick={(evt) => {\n                evt.preventDefault();\n                setActiveNav(1);\n              }}\n            >Overview\n            </a>\n          </li>\n          <li className={activeNav === 2 ? 'film-nav__item film-nav__item--active' : 'film-nav__item'}>\n            <a\n              href=\"/#\"\n              className=\"film-nav__link\"\n              onClick={(evt) => {\n                evt.preventDefault();\n                setActiveNav(2);\n              }}\n            >\n              Details\n            </a>\n          </li>\n          <li className={activeNav === 3 ? 'film-nav__item film-nav__item--active' : 'film-nav__item'}>\n            <a\n              href=\"/#\"\n              className=\"film-nav__link\"\n              onClick={(evt) => {\n                evt.preventDefault();\n                setActiveNav(3);\n              }}\n            >Reviews\n            </a>\n          </li>\n        </ul>\n      </nav>\n      {activeNav === 1 ? <List /> : ''}\n      {activeNav === 2 ? <Details movie={currentMovie}/> : ''}\n      {activeNav === 3 ? <Reviews id={currentMovie.id}/> : ''}\n    </div>\n  );\n}\n\nexport default Tabs;\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { MAX_SIMILAR_MOVIES_SHOWN } from '../../consts';\nimport MovieCard from '../movie-card/movie-card';\nimport { getMovie, getMovies, getGenres } from '../../store/movie-data/selectors';\nimport { getFilteredMovies } from '../../selectors/get-filtered-movies';\n\nfunction SimilarMovies() {\n  const currentMovie = useSelector(getMovie);\n  const movies = useSelector(getMovies);\n  const genre = useSelector(getGenres);\n\n  const filteredMovies = getFilteredMovies(movies, genre);\n  const moviesFilteredBySimilarity = filteredMovies.filter((movie) => movie.id !== currentMovie.id);\n  const filteredByGenre = moviesFilteredBySimilarity.filter((movie) => movie.genre === currentMovie.genre );\n\n  const [activeMovie, setActiveMovie] = useState();\n\n  return (\n    <section className=\"catalog catalog--like-this\" data-testid=\"smilar-movies\">\n      <h2 className=\"catalog__title\">More like this</h2>\n      <div className=\"catalog__films-list\">\n        {filteredByGenre.slice(0, MAX_SIMILAR_MOVIES_SHOWN).map((item) => (\n          <MovieCard\n            key={item.id+1}\n            movie={item}\n            isActive={item === activeMovie}\n            onMouseOver={() => setActiveMovie(item)}\n            onMouseOut={() => setActiveMovie(null)}\n          />\n        ))}\n      </div>\n    </section>\n  );\n}\n\nexport default SimilarMovies;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from 'react-router';\nimport Logo from '../logo/logo';\nimport UserBlock from '../user-block/user-block';\nimport MyListButton from '../buttons/my-list-button';\nimport PlayButton from '../buttons/play-button';\nimport Tabs from '../tabs/tabs';\nimport SimilarMovies from '../similar-movies/similar-movies';\nimport Footer from '../footer/footer';\nimport { AppRoutes, AuthorizationStatus } from '../../consts';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\nimport { getMovie } from '../../store/movie-data/selectors';\nimport { fetchMovie } from '../../store/api-actions';\n\nfunction MoviePage({id}) {\n  const movie = useSelector(getMovie);\n  const authorizationStatus = useSelector(getAuthorizationStatus);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const handlePlayButtonClick = () => history.push(`/player/${id}`);\n\n  const isAuth = authorizationStatus === AuthorizationStatus.AUTH ? `/films/${id}/review` : `${AppRoutes.LOGIN}`;\n\n  useEffect(() => {\n    dispatch(fetchMovie(id));\n  }, []);\n\n  return (\n    <>\n      <section className=\"film-card film-card--full\">\n        <div className=\"film-card__hero\" data-testid=\"film-card-hero\">\n          <div className=\"film-card__bg\">\n            <img src={movie.backgroundImage} alt={movie.name} />\n          </div>\n\n          <h1 className=\"visually-hidden\">WTW</h1>\n\n          <header className=\"page-header film-card__head\">\n            <Logo />\n            <UserBlock />\n          </header>\n\n          <div className=\"film-card__wrap\">\n            <div className=\"film-card__desc\">\n              <h2 className=\"film-card__title\">{movie.name}</h2>\n              <p className=\"film-card__meta\">\n                <span className=\"film-card__genre\">{movie.genre}</span>\n                <span className=\"film-card__year\">{movie.released}</span>\n              </p>\n\n              <div className=\"film-card__buttons\">\n                <PlayButton\n                  onClick={handlePlayButtonClick}\n                />\n                <MyListButton movie={movie}/>\n                <Link\n                  to={isAuth}\n                  className=\"btn film-card__button\"\n                >Add review\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"film-card__wrap film-card__translate-top\">\n          <div className=\"film-card__info\">\n            <div className=\"film-card__poster film-card__poster--big\">\n              <img src={movie.previewImage} alt={movie.name} width=\"218\" height=\"327\" />\n            </div>\n            <Tabs/>\n          </div>\n        </div>\n      </section>\n      <div className=\"page-content\">\n        <SimilarMovies/>\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nMoviePage.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default MoviePage;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Logo from '../logo/logo';\nimport Footer from '../footer/footer';\nimport MovieList from '../movie-list/movie-list';\nimport UserBlock from '../user-block/user-block';\nimport { getMovies } from '../../store/movie-data/selectors';\nimport { fetchFavoriteMovieList } from '../../store/api-actions';\n\nfunction MyList() {\n  const movies = useSelector(getMovies);\n  const favoriteMovies = movies.filter((item) => item.isFavorite);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchFavoriteMovieList());\n  }, []);\n\n  return (\n    <div className=\"user-page\">\n      <header className=\"page-header user-page__head\">\n        <Logo />\n        <h1 className=\"page-title user-page__title\">My list</h1>\n        <UserBlock />\n      </header>\n      <section className=\"catalog\">\n        <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n        <MovieList movies={favoriteMovies}/>\n      </section>\n      <Footer />\n    </div>\n  );\n}\n\nexport default MyList;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { AppRoutes } from '../../consts';\n\nfunction NotFoundScreen() {\n\n  return (\n    <section>\n      <h1>404. Page not found</h1>\n      <Link to={AppRoutes.ROOT}>Вернуться на главную</Link>\n    </section>\n  );\n}\n\nexport default NotFoundScreen;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Rating(props) {\n  const {rating, onChange} = props;\n  return (\n    <React.Fragment>\n      <input\n        className=\"rating__input\"\n        id={`star-${rating+1}`}\n        type=\"radio\"\n        name=\"rating\"\n        value={rating+1}\n        onChange={(evt) => onChange(evt)}\n      />\n      <label\n        className=\"rating__label\"\n        htmlFor={`star-${rating+1}`}\n      >\n        Rating {rating+1}\n      </label>\n    </React.Fragment>\n  );\n}\n\nRating.propTypes = {\n  rating: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default Rating;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport { useDispatch } from 'react-redux';\nimport { postReview } from '../../store/api-actions';\nimport { ReviewLength } from '../../consts';\nimport Rating from './rating';\n\nfunction AddReviewForm(props) {\n  const {id} = props;\n\n  const [review, setReview] = useState({\n    rating: null,\n    comment: '',\n  });\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const validate = () => {\n    if (review.rating === null || review.comment.length < ReviewLength.MIN || review.comment.length > ReviewLength.MAX) {\n      return false;\n    }\n\n    return true;\n  };\n\n  function handleChange(evt) {\n    const name = evt.target.name;\n    const value = evt.target.value;\n\n    setReview({\n      ...review,\n      [name]: value,\n    });\n  }\n\n  const getHistory = () => {\n    history.goBack();\n  };\n\n  const onReviewSubmit = (evt) => {\n    evt.preventDefault();\n    dispatch(postReview(id, review, getHistory));\n  };\n\n  return (\n    <div className=\"add-review\" data-testid=\"add-review-form-id\">\n      <form\n        action=\"#\"\n        className=\"add-review__form\"\n        onSubmit={onReviewSubmit}\n        disabled={!validate()}\n      >\n        <div className=\"rating\">\n          <div className=\"rating__stars\">\n            {[...Array(10).keys()].reverse().map((rating, idx) => {\n              const ratingValue=rating+1;\n              return (\n                <Rating\n                  key={ratingValue}\n                  rating={rating}\n                  onChange={handleChange}\n                />\n              );\n            })}\n          </div>\n        </div>\n        <div className=\"add-review__text\">\n          <textarea\n            className=\"add-review__textarea\"\n            name=\"comment\"\n            id=\"review-text\"\n            placeholder=\"Review text\"\n            value={review.comment}\n            onChange={handleChange}\n            data-testid=\"review-textarea\"\n          >\n          </textarea>\n          <div className=\"add-review__submit\">\n            <button\n              className=\"add-review__btn\"\n              type=\"submit\"\n              disabled={!validate()}\n            >\n              Post\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nAddReviewForm.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default AddReviewForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Logo from '../logo/logo.jsx';\nimport UserBlock from '../user-block/user-block';\nimport { getMovie } from '../../store/movie-data/selectors';\nimport AddReviewForm from './add-review-form';\n\nfunction Review({id}) {\n  const movie = useSelector(getMovie);\n\n  return (\n    <section className=\"film-card film-card--full\">\n      <div className=\"film-card__header\">\n        <div className=\"film-card__bg\">\n          <img src={movie.previewImage} alt={movie.name} />\n        </div>\n        <h1 className=\"visually-hidden\">WTW</h1>\n        <header className=\"page-header\">\n          <Logo />\n          <nav className=\"breadcrumbs\">\n            <ul className=\"breadcrumbs__list\">\n              <li className=\"breadcrumbs__item\">\n                <Link to={`/films/${id}`} className=\"breadcrumbs__link\">{movie.name}</Link>\n              </li>\n              <li className=\"breadcrumbs__item\">\n                <Link to={`/films/${id}/review`} className=\"breadcrumbs__link\">Add review</Link>\n              </li>\n            </ul>\n          </nav>\n          <UserBlock />\n        </header>\n\n        <div className=\"film-card__poster film-card__poster--small\">\n          <img src={movie.previewImage} alt={movie.name} width=\"218\" height=\"327\" />\n        </div>\n      </div>\n      <AddReviewForm id={id}/>\n    </section>\n  );\n}\n\nReview.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default Review;\n","import React, { useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport { useSelector } from 'react-redux';\nimport { getMovie } from '../../store/movie-data/selectors';\nimport { timeFormating } from '../../utils/utils';\nimport { seconds } from '../../consts';\n\nfunction PlayerScreen({id}) {\n  const currentMovie = useSelector(getMovie);\n  const history = useHistory();\n\n  const [isVideoPlaying, setIsVideoPlaying] = useState(false);\n  const [currentVideoTime, setCurrentVideoTime] = useState(0);\n  const videoDuration = currentMovie.runTime*seconds;\n\n  const videoRef = useRef(null);\n  const playerRef = useRef(null);\n\n  const playOrPause = () => {\n    if (videoRef.current.paused || videoRef.current.ended) {\n      videoRef.current.play();\n      setIsVideoPlaying(true);\n    } else {\n      videoRef.current.pause();\n      setIsVideoPlaying(false);\n    }\n  };\n\n  const onProgress = (e) => setCurrentVideoTime(e.target.currentTime);\n\n  const onFullScreen = (elem) => {\n    if (!document.fullscreenElement) {\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      }\n    } else {\n      document.exitFullscreen();\n    }\n  };\n\n  return (\n    <div className=\"player\" ref={playerRef}>\n      <video\n        src={currentMovie.videoLink}\n        className=\"player__video\"\n        poster={currentMovie.backgroundImage}\n        onProgress={onProgress}\n        muted={false}\n        ref={videoRef}\n      >\n      </video>\n\n      <button\n        type=\"button\"\n        className=\"player__exit\"\n        onClick={() => history.goBack()}\n      >Exit\n      </button>\n\n      <div className=\"player__controls\">\n        <div className=\"player__controls-row\">\n          <div className=\"player__time\">\n            <progress\n              className=\"player__progress\"\n              value={`${(currentVideoTime/videoDuration)*100}%`}\n              max=\"100\"\n            >\n            </progress>\n\n            <div\n              className=\"player__toggler\"\n              style={{left: `${(currentVideoTime/videoDuration)*100}%`}}\n            >Toggler\n            </div>\n          </div>\n          <div className=\"player__time-value\">{timeFormating(videoDuration - currentVideoTime)}</div>\n        </div>\n\n        <div className=\"player__controls-row\">\n          <button\n            type=\"button\"\n            className=\"player__play\"\n            onClick={playOrPause}\n          >\n            {isVideoPlaying ?\n              <>\n                <svg viewBox=\"0 0 14 21\" width=\"14\" height=\"21\">\n                  <use xlinkHref=\"#pause\"></use>\n                </svg>\n                <span>Pause</span>\n              </> :\n              <>\n                <svg viewBox=\"0 0 19 19\" width=\"19\" height=\"19\">\n                  <use xlinkHref=\"#play-s\"></use>\n                </svg>\n                <span>Play</span>\n              </>}\n          </button>\n          <div className=\"player__name\">{currentMovie.name}</div>\n\n          <button\n            type=\"button\"\n            className=\"player__full-screen\"\n            onClick={() => onFullScreen(playerRef.current)}\n          >\n            <svg viewBox=\"0 0 27 27\" width=\"27\" height=\"27\">\n              <use xlinkHref=\"#full-screen\"></use>\n            </svg>\n            <span>Full screen</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nPlayerScreen.propTypes = {\n  id: PropTypes.number,\n};\n\nexport default PlayerScreen;\n","import React from 'react';\n\nfunction LoadingScreen() {\n  return (\n    <p data-testid=\"loader\">Loading ...</p>\n  );\n}\n\nexport default LoadingScreen;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Route, Redirect } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { AppRoutes, AuthorizationStatus } from '../../consts';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\n\nfunction PrivateRoute(props) {\n  const {render, path, exact} = props;\n  const authorizationStatus = useSelector(getAuthorizationStatus) ;\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={(routeProps) => (\n        authorizationStatus === AuthorizationStatus.AUTH\n          ? render(routeProps)\n          : <Redirect to={AppRoutes.LOGIN} />\n      )}\n    />\n  );\n}\n\nPrivateRoute.propTypes = {\n  exact: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default PrivateRoute;\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Switch, Route } from 'react-router-dom';\nimport { AppRoutes } from '../../consts';\nimport { isCheckedAuth } from '../../utils/utils';\nimport MainPage from '../main-page/main-page';\nimport Login from '../user-block/login.jsx';\nimport MoviePage from '../movie-page/movie-page';\nimport MyList from '../my-list/my-list';\nimport NotFoundScreen from '../not-found-screen/not-found-screen';\nimport Review from '../review/review';\nimport PlayerScreen from '../player/player-screen';\nimport LoadingScreen from '../loading-screen/loading-screen';\nimport PrivateRoute from '../private-route/private-route';\nimport { init as initApp } from './action/init';\nimport { getAuthorizationStatus } from '../../store/user/selectors';\nimport { getFetchedMovieStatus } from '../../store/movie-data/selectors';\n\nfunction App(props) {\n  const {authorizationStatus, isFetching, init} = props;\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  if(isCheckedAuth(authorizationStatus) || isFetching) {\n    return <LoadingScreen />;\n  }\n\n  return (\n    <Switch>\n      <Route exact path={AppRoutes.ROOT} render={() => <MainPage />} />\n      <Route exact path={AppRoutes.FILM} render={(data) => <MoviePage id={Number(data.match.params.id)} />} />\n      <PrivateRoute exact path={AppRoutes.MYLIST} render={() => <MyList />}/>\n      <PrivateRoute exact path={AppRoutes.REVIEW} render={(data) => <Review id={Number(data.match.params.id)} />}/>\n      <Route exact path={AppRoutes.PLAYER} render={(data) => <PlayerScreen id={Number(data.match.params.id)} />} />\n      <Route exact path={AppRoutes.LOGIN} render={() => <Login />} />\n      <Route>\n        <NotFoundScreen />\n      </Route>\n    </Switch>\n  );\n}\n\nApp.propTypes = {\n  authorizationStatus: PropTypes.string.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  init: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  authorizationStatus: getAuthorizationStatus(state),\n  isFetching: getFetchedMovieStatus(state),\n});\n\nconst mapDispatchToProps = (dispatch) =>({\n  init(){\n    dispatch(initApp());\n  },\n});\n\nexport {App};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { checkAuth, fetchMovieList, fetchPromoMovie, setFetchStatus } from '../../../store/api-actions';\n\nexport const init = () => async (dispatch) => {\n  dispatch(setFetchStatus(true));\n  await dispatch(checkAuth());\n  await dispatch(fetchMovieList());\n  await dispatch(fetchPromoMovie());\n  dispatch(setFetchStatus(false));\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { configureStore } from '@reduxjs/toolkit';\nimport rootReducer from './store/root-reducer';\nimport { createAPI } from './services/api';\nimport { requireAuthorization } from './store/action';\nimport { AuthorizationStatus } from './consts';\nimport { redirect } from './store/middlewares/redirect';\nimport {Router as BrowserRouter} from 'react-router-dom';\nimport { browserHistory } from './browser-history';\n\nimport App from './components/app/app';\n\nconst api = createAPI(\n  () => store.dispatch(requireAuthorization(AuthorizationStatus.NO_AUTH)),\n);\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: api,\n      },\n    }).concat(redirect),\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter history={browserHistory}>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'));\n"],"sourceRoot":""}